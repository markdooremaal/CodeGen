openapi: 3.0.0
info:
  description: This is the API for the 2.4 Code Generation Bank application
  version: "0.0.1"
  title: Bank API
paths:
  /Transactions:
    get:
      security:
        - bearerAuth: []
      tags:
        - Transactions
      summary: Get all Transactions
      operationId: getAllTransactions
      description: Calling this allows you to fetch all transactions
      responses:
        "200":
          description: The transactions
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Transaction"
        "400":
          description: bad input parameter
  /Transactions/{id}:
    get:
      security:
        - bearerAuth: []
      parameters:
        - in: path
          name: id
          schema:
            type: integer
          required: true
          description: Numeric ID of the transaction to get
      tags:
        - Transactions
      summary: Get a transaction by id
      operationId: getTransactionById
      description: Calling this allows you to fetch a specific transaction by id
      responses:
        "200":
          description: the transaction
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Transaction"
        "400":
          description: bad input parameter

  /Users:
    get:
      security:
        - bearerAuth: []
      tags:
        - Users
      summary: Get all Users
      operationId: getAllUsers
      description: Calling this allows you to fetch all users
      responses:
        "200":
          description: The users
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/User"
        "400":
          description: bad input parameter
    post:
      security:
        - bearerAuth: []
      tags:
        - Users
      summary: Create new user
      requestBody:
        description: User object
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/User"
      operationId: createUser
      description: Calling this allows you to create a new user
      responses:
        "200":
          description: User created
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/User"
        "400":
          description: bad input parameter
  /Users/{id}:
    get:
      security:
        - bearerAuth: []
      parameters:
        - in: path
          name: id
          schema:
            type: integer
          required: true
          description: Numeric ID of the user to get
      tags:
        - Users
      summary: Get a user by id
      operationId: getUserById
      description: Calling this allows you to fetch a specific user by id
      responses:
        "200":
          description: the user
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/User"
        "400":
          description: bad input parameter
    put:
      security:
        - bearerAuth: []
      tags:
        - Users
      summary: Update a user
      requestBody:
        description: User object
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/User"
      operationId: updateUser
      description: Calling this allows you to update a user
      responses:
        "200":
          description: User updated
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/User"
        "400":
          description: bad input parameter
    delete:
      security:
        - bearerAuth: []
      tags:
        - Users
      summary: Deletes a user
      operationId: deleteUser
      description: Calling this allows you to delete a user
      responses:
        "200":
          description: User deleted
        "400":
          description: bad input parameter
  /BankAccounts:
    get:
      security:
        - bearerAuth: []
      tags:
        - Accounts
      summary: Get all Bank Accounts
      operationId: getAllAccounts
      description: Calling this allows you to fetch all Bank Accounts
      responses:
        "200":
          description: The Bank Accounts
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/BankAccount"
        "400":
          description: bad input parameter
  /BankAccounts/{id}:
    get:
      security:
        - bearerAuth: []
      parameters:
        - in: path
          name: id
          schema:
            type: string
          required: true
          description: IBAN of the Bank Account to get
      tags:
        - Accounts
      summary: Get a Bank Account by IBAN
      operationId: getAccountById
      description: Calling this allows you to fetch a specific Bank Account by id
      responses:
        "200":
          description: the Bank Account
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/BankAccount"
        "400":
          description: bad input parameter
components:
  securitySchemes:
    bearerAuth:
      type: http
      scheme: bearer
      bearerFormat: JWT

  schemas:
    Transaction:
      type: object
      required:
        - id
        - accountFrom
        - accountTo
        #user Performing can be set based on auth user
        - amount
      properties:
        id:
          type: integer
        accountFrom:
          type: string
        accountTo:
          type: string
        userPerforming:
          type: integer
        amount:
          type: number
          format: double

    BankAccount:
      type: object
      required:
        - id
        - userId
        - type
        # - balance -- Deze maken we niet required right?
        # - absoluteLimit
        # - dayLimit
        # - transactionLimit
      properties:
        id:
          type: integer
        userId:
          type: integer
        type: #TODO: Not sure how to implement enum
          type: string
        balance:
          type: number
          format: double
        absoluteLimit:
          type: number
          format: double
        dayLimit:
          type: number
          format: double
        transactionLimit:
          type: number
          format: double

    User:
      type: object
      required:
        # - id
        - firstName
        - lastName
        - email
        - password
        - role
        - status
      properties:
        id:
          type: integer
        firstName:
          type: string
        lastName:
          type: string
        email:
          type: string
        password:
          type: string
        role: #TODO: Properly impleemnt enums here too
          type: string
        status:
          type: string
